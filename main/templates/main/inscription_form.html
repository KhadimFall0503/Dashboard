{% extends "main/base.html" %}
{% load static %}

{% block title %}
  {% if object %}Modifier{% else %}Nouvelle{% endif %} Inscription
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-12 p-8 bg-white text-gray-900 rounded-2xl shadow-xl">

  <!-- En-tête -->
  <div class="flex flex-col sm:flex-row items-center justify-between mb-8 gap-4">
    <h1 class="text-3xl font-extrabold text-indigo-600 flex items-center gap-3">
      <i class="fas fa-clipboard-list"></i>
      {% if object %}Modifier{% else %}Nouvelle{% endif %} Inscription
    </h1>

    <a href="{% url 'inscription_list' %}"
       class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition flex items-center gap-2 text-gray-900">
      <i class="fas fa-arrow-left"></i> Retour
    </a>
  </div>

  <!-- Messages d'erreur -->
  {% if form.errors %}
  <div class="mb-6 p-4 bg-red-100 border border-red-300 rounded-lg">
    <p class="font-semibold text-red-700 mb-2">
      Veuillez corriger les erreurs ci-dessous :
    </p>
    {{ form.non_field_errors }}
  </div>
  {% endif %}

  <!-- Formulaire -->
  <form method="post" class="space-y-6">
    {% csrf_token %}

    <!-- Étudiant -->
    {% if form.etudiant %}
    <div>
      <label class="block text-sm font-semibold mb-2">Étudiant</label>
      <div class="relative">
        {{ form.etudiant }}
        <i class="fas fa-user-graduate absolute right-3 top-3 text-gray-400"></i>
      </div>
      {{ form.etudiant.errors }}
    </div>
    {% endif %}

    <!-- Filière -->
    <div>
      <label class="block text-sm font-semibold mb-2">Filière</label>
      <div class="relative">
        {{ form.filiere }}
        <i class="fas fa-book absolute right-3 top-3 text-gray-400"></i>
      </div>
      {{ form.filiere.errors }}
    </div>

    <!-- Année académique -->
    <div>
      <label class="block text-sm font-semibold mb-2">Année académique</label>
      <div class="relative">
        {{ form.annee_academique }}
        <i class="fas fa-calendar-alt absolute right-3 top-3 text-gray-400"></i>
      </div>
      {{ form.annee_academique.errors }}
    </div>

    <!-- Boutons -->
    <div class="flex flex-col sm:flex-row justify-end gap-4 pt-6">
      <a href="{% url 'inscription_list' %}"
         class="px-5 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition text-gray-900 text-center">
        Annuler
      </a>
      <button type="submit"
              class="px-6 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 transition text-white font-semibold">
        Enregistrer
      </button>
    </div>
  </form>

</div>

<!-- Styles pour les champs Django -->
<style>
  input, select {
    width: 100%;
    padding: 0.6rem 1rem;
    background-color: #f9fafb; /* fond clair */
    border: 1px solid #d1d5db;
    border-radius: 0.75rem;
    color: #111827;
  }

  input:focus, select:focus {
    outline: none;
    border-color: #6366f1;
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.4);
  }

  ul.errorlist {
    margin-top: 0.25rem;
    color: #b91c1c;
    font-size: 0.875rem;
  }
</style>
{% endblock %}
