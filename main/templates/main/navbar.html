{% load static %}
<body class="bg-gray-900 text-gray-100">

<div class="flex min-h-screen">

  <!-- Sidebar fixe sur desktop, cachée sur mobile -->
  <aside class="w-64 bg-gray-900 text-gray-100 shadow-xl fixed inset-y-0 left-0 flex flex-col transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-50" id="sidebar">

    <!-- Logo -->
    <div class="p-6 text-2xl font-bold border-b border-gray-800 flex items-center gap-3">
        <img src="{% static 'main/school.png' %}" alt="Logo" class="h-10 w-10 object-cover rounded-full">
        <span><span class="text-indigo-500">School</span> Manager</span>
    </div>

    <!-- Menu -->
    <nav class="mt-6 flex-1 space-y-2">
      <a href="{% url 'dashboard' %}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-gray-800 transition">
        <i class="fas fa-chart-line text-indigo-400"></i>
        <span class="font-medium">Dashboard</span>
      </a>
      <a href="{% url 'etudiant_list' %}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-gray-800 transition">
        <i class="fas fa-user-graduate text-indigo-400"></i>
        <span class="font-medium">Étudiants</span>
      </a>
      <a href="{% url 'filiere_list' %}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-gray-800 transition">
        <i class="fas fa-layer-group text-indigo-400"></i>
        <span class="font-medium">Filières</span>
      </a>
      <a href="{% url 'inscription_list' %}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-gray-800 transition">
        <i class="fas fa-clipboard-list text-indigo-400"></i>
        <span class="font-medium">Inscriptions</span>
      </a>
    </nav>

    <!-- User -->
    <div class="mt-auto border-t border-gray-800 p-4">
      <p class="text-sm text-gray-400">Connecté :</p>
      <p class="font-semibold">{{ request.user.username }}</p>
      <a href="" class="flex items-center justify-center gap-2 mt-4 bg-red-600 py-2 rounded-lg hover:bg-red-700 transition">
        <i class="fas fa-sign-out-alt"></i>
        <span>Déconnexion</span>
      </a>
    </div>

  </aside>

  <!-- Overlay mobile -->
  <div class="fixed inset-0 bg-black opacity-50 z-40 md:hidden hidden" id="overlay"></div>

  <!-- Contenu principal défilable -->
  <main class="flex-1 ml-0 md:ml-64 px-4 sm:px-8 py-8 bg-gray-900 text-gray-100 min-h-screen">
    
    <!-- Bouton mobile pour ouvrir sidebar -->
    <button class="md:hidden mb-4 px-3 py-2 bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition" id="openSidebar">
      ☰ Menu
    </button>

    <div class="max-w-7xl mx-auto w-full">
      {% block content %}{% endblock %}
    </div>
  </main>

</div>

<script>
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const openBtn = document.getElementById('openSidebar');

  openBtn.addEventListener('click', () => {
    sidebar.classList.remove('-translate-x-full');
    overlay.classList.remove('hidden');
  });

  overlay.addEventListener('click', () => {
    sidebar.classList.add('-translate-x-full');
    overlay.classList.add('hidden');
  });
</script>

</body>
