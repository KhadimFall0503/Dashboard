{% extends "main/base.html" %}
{% block title %}Liste des Étudiants{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto mt-8 p-6 bg-gray-900 text-white rounded-2xl shadow-xl">

  <h1 class="text-4xl font-extrabold mb-8 text-center text-indigo-400">Liste des Étudiants</h1>

  <!-- Table responsive -->
  <div class="overflow-x-auto rounded-lg border border-gray-700">
    <table class="min-w-full divide-y divide-gray-700 text-sm">
      <thead class="bg-gray-800">
        <tr>
          <th class="px-6 py-3 text-left font-semibold uppercase tracking-wider">Prénom</th>
          <th class="px-6 py-3 text-left font-semibold uppercase tracking-wider">Nom</th>
          <th class="px-6 py-3 text-left font-semibold uppercase tracking-wider">Date de naissance</th>
          <th class="px-6 py-3 text-left font-semibold uppercase tracking-wider">Email</th>
          <th class="px-6 py-3 text-left font-semibold uppercase tracking-wider">Téléphone</th>
          <th class="px-6 py-3 text-left font-semibold uppercase tracking-wider">Créé le</th>
          <th class="px-6 py-3 text-center font-semibold uppercase tracking-wider">Action</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-700">
        {% for etudiant in etudiants %}
        <tr class="hover:bg-gray-800 transition duration-200 ease-in-out">
          <td class="px-6 py-3">{{ etudiant.prenom }}</td>
          <td class="px-6 py-3">{{ etudiant.nom }}</td>
          <td class="px-6 py-3">{{ etudiant.date_naissance|date:"d/m/Y" }}</td>
          <td class="px-6 py-3">{{ etudiant.email }}</td>
          <td class="px-6 py-3">{{ etudiant.telephone|default:"-" }}</td>
          <td class="px-6 py-3">{{ etudiant.date_creation|date:"d/m/Y H:i" }}</td>
          <td class="px-6 py-3 text-center">
            <a href="{% url 'etudiant_detail' etudiant.id %}" 
               class="text-indigo-400 hover:text-indigo-500 transition">
              <i class="fas fa-eye"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="px-6 py-3 text-center text-gray-400">Aucun étudiant trouvé.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  {% if is_paginated %}
  <div class="mt-6 flex justify-center space-x-2">
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}" 
         class="px-4 py-2 bg-indigo-600 rounded-xl hover:bg-indigo-500 transition">Précédent</a>
    {% endif %}
    <span class="px-4 py-2 bg-gray-800 rounded-xl">{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}" 
         class="px-4 py-2 bg-indigo-600 rounded-xl hover:bg-indigo-500 transition">Suivant</a>
    {% endif %}
  </div>
  {% endif %}

</div>
{% endblock %}
